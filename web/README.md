# Cutting Optimizer Client — Клиент для оптимизатора раскроя

## О проекте

Фронтенд-клиент на **Next.js 15** для работы с сервисом оптимизации раскроя листовых материалов.  
Позволяет вводить и редактировать детали и материалы, настраивать параметры оптимизации, запускать расчёт через API, просматривать статистику, визуализировать раскрой на листах и печатать готовые планы.

Работает в связке с backend-сервером (отдельный репозиторий).

## Технологии и инструменты

| Категория        | Технология               | Назначение                                             |
| ---------------- | ------------------------ | ------------------------------------------------------ |
| Фреймворк        | Next.js 15               | SSR/CSR, маршрутизация, оптимизация производительности |
| Библиотека UI    | shadcn/ui + Tailwind CSS | Современные готовые компоненты и гибкая стилизация     |
| State management | Zustand                  | Лёгкий и быстрый глобальный store                      |
| Таблицы          | @tanstack/react-table    | Мощные редактируемые таблицы с сортировкой             |
| Визуализация     | D3.js                    | Генерация SVG-планов раскроя с масштабированием        |
| Валидация        | Zod                      | Надёжная проверка данных на клиенте                    |
| HTTP-клиент      | Axios                    | Запросы к API с обработкой ошибок                      |

## Основные возможности

- Редактируемые таблицы деталей и материалов (добавление, удаление, правка на лету)
- Форма настроек оптимизации (минимизация отходов, умный режим, бесконечные материалы)
- Запуск расчёта одной кнопкой с валидацией данных
- Подробная статистика: отходы, процент использования, количество листов
- Интерактивная визуализация раскроя на SVG (D3.js)
- Поддержка поворота деталей, тултипы, выделение при клике
- Печать планов на A4 (landscape) с автоматическим размещением нескольких листов на странице
- Масштабирование и настройка размера шрифта перед печатью
- Уведомления (toasts) об ошибках API

## Структура проекта

```
src
┣ entities/
┃ ┣ material/model/types.ts         # Типы материалов
┃ ┗ part/model/types.ts             # Типы деталей
┣ features/
┃ ┗ cutting-parts-optimizer/
┃   ┣ lib/                           # Утилиты и тестовые наборы данных
┃   ┣ model/store.ts                # Zustand-store
┃   ┣ CuttingPartsOptimizer.tsx     # Главный компонент страницы
┃   ┣ CuttingPlan.tsx               # Визуализация раскроя (D3)
┃   ┣ OptimizerMaterialsTable.tsx   # Таблица материалов
┃   ┣ OptimizerPartsTable.tsx       # Таблица деталей
┃   ┗ OptimizerSettingsForm.tsx     # Форма настроек
┣ shared/
┃ ┣ api/                             # Клиент API и DTO
┃ ┣ lib/utils.ts                     # Общие утилиты
┃ ┗ ui/                              # UI-компоненты (shadcn/ui + кастомный DataTable)
app/
┣ api/                             # API-роуты (получение/сохранение/чтение данных извне по API)
┣ layout.tsx
┗ page.tsx                         # Страница оптимизатора
```

## Запуск

```bash
# 1. Перейти в директорию Web приложения
cd web

# 2. Установить зависимости
npm install

# 3. Скопировать `.env.example` в `.env`:
cp .env.example .env

# 4. Запустить в режиме разработки
npm run dev

# 5. Открыть в браузере
http://localhost:3000
```

## Пример использования

1. Добавьте детали в таблицу (можно выбрать готовый набор в выпадающем списке)
2. При необходимости укажите доступные материалы
3. Настройте параметры оптимизации
4. Нажмите «Расчитать», появится статистика и визуальный план раскроя
5. Настройте масштаб и нажмите «Печать» для вывода на принтер

## Особенности реализации

1. Полностью типизированный код на TypeScript
2. Чистая модульная архитектура (entities → features → shared)
3. Редактируемые таблицы с валидацией на лету (Zod + Tanstack Table)
4. Глобальное состояние через Zustand
5. Динамическая SVG-визуализация с D3.js и поддержкой печати
6. Адаптивный и приятный UI на базе shadcn/ui + Tailwind
7. Обработка ошибок API с понятными тостами
8. Интеграция с внешними приложениями через API

## Планы развития

- Покрытие тестами
- Аутентификация и сохранение проектов пользователя
- Импорт/экспорт данных (Excel, CSV, JSON)
- Экспорт планов в PDF
- Мобильная верстка
- Перенос хранилища данных из файлов в БД на API сервис
